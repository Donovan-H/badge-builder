<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">

<link rel="import" href="../behaviors/editable-behavior.html">
<link rel="import" href="../behaviors/add-remove-behavior.html">
<link rel="import" href="../behaviors/selectable-edit-behavior.html">
<link rel="import" href="../behaviors/datamodel-behavior.html">
<link rel="import" href="../behaviors/hint-behavior.html">

<!--
Quiz component for question with mutiple choice response (checkbox style)

Example:

    <quiz-multiple question="Which shapes have more than 7 sides?" options='["Pentagon","Heptagon","Nonagon","Decagon"]' shuffle></quiz-multiple>

@demo
-->
<dom-module id="quiz-multiple">

  <style>
    :host {
      display: block;
      box-sizing: border-box;
      @apply(--paper-font-common-base);
    }

    paper-input {
      display: inline-block;
    }

    .question {
      width: 100%;
    }
  </style>

  <template>
    <paper-material class="content">
      <div>
        <h3 hidden=[[!edit]]>Multiple Choice Quiz Element</h3>
        <paper-tooltip hidden=[[!edit]]>This is a multiple choice question where many options can be selected and there can be more than one correct answer. You can use the + and - buttons to add and delete options that the user can select. After you have listed all of the options available to the user, tick the boxes to indicate the correct answers for this question. Remember, multiple choice indicates to the user to select more than one box.</paper-tooltip>
      </div>
      <h3 class="question" hidden=[[edit]]>[[question]]</h3>
      <div><paper-input class="question" placeholder="Question" value="{{question}}" hidden=[[!edit]]></paper-input></div>

      <div hidden=[[!edit]]>
        <paper-input class="question" placeholder="Hint Text" value="{{hintText}}"></paper-input>
        <paper-tooltip>Enter the hint you want to display to user's if they get this question wrong</paper-tooltip>
      </div>
      <content></content>
      <br/>
	    <div class="hint_error" hidden=[[!showHint]]>
        <p>[[hintText]]</p>
      </div>
    </paper-material>
  </template>

  <script>
    QuizMultiple = Polymer({
      is: 'quiz-multiple',
      properties: {
        /**
         * The `question` for the quiz element.
         * @type {string}
         */
        question: {
          type: String
        },

        /**
         * `multi` indicates whether the element supports multiple selections.
         *
         * @type boolean
         * @default true
         */
        multi: {
          type: Boolean,
          readOnly: true,
          value: true
        }
      },

      /**
       * Returns the JSON data for saving
       */
      getData: function() {
        return {
          _id : this._id,
          elementType : this.localName,
          question : this.question,
          options : this.options,
          answer : this.selectedOptions(),
          hintText : this.hintText,
          showHint: this.showHint
        };
      },

      behaviors: [
        QuizBehaviors.AddRemoveBehavior,
        QuizBehaviors.SelectableEditBehavior,
        QuizBehaviors.EditableBehavior,
        QuizBehaviors.DataModelBehavior,
        QuizBehaviors.HintBehavior
      ]
    });
  </script>
</dom-module>
